<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Temp Mail by Kami Flex</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    async function generateEmail() {
      const res = await fetch("/api/tempmail?op=generate");
      const data = await res.json();
      document.getElementById("generatedEmail").innerText = data.email || JSON.stringify(data);
      document.getElementById("emailInput").value = data.email || "";
    }

    async function getInbox() {
      const email = document.getElementById("emailInput").value;
      if (!email) return alert("‚ö†Ô∏è Please enter email first");
      const res = await fetch(`/api/tempmail?op=inbox&email=${email}`);
      const data = await res.json();
      document.getElementById("inbox").innerText = JSON.stringify(data, null, 2);
    }

    async function getMessage() {
      const email = document.getElementById("emailInput").value;
      const messageid = document.getElementById("messageIdInput").value;
      if (!email || !messageid) return alert("‚ö†Ô∏è Please enter both email and message ID");
      const res = await fetch(`/api/tempmail?op=message&email=${email}&messageid=${messageid}`);
      const data = await res.json();
      document.getElementById("message").innerText = JSON.stringify(data, null, 2);
    }
  </script>
</head>
<body class="bg-gray-900 text-white min-h-screen flex flex-col items-center p-6">
  <h1 class="text-3xl font-bold text-indigo-400 mb-6">üìß Temp Mail by Kami Flex</h1>

  <div class="bg-gray-800 p-6 rounded-2xl shadow-lg w-full max-w-lg mb-6">
    <button onclick="generateEmail()" class="bg-indigo-500 hover:bg-indigo-600 px-4 py-2 rounded-lg text-white font-semibold">
      Generate Temp Email
    </button>
    <p class="mt-4"><b>Generated Email:</b> <span id="generatedEmail" class="text-green-400">---</span></p>
  </div>

  <div class="bg-gray-800 p-6 rounded-2xl shadow-lg w-full max-w-lg mb-6">
    <h2 class="text-xl font-semibold text-yellow-400 mb-2">Check Inbox</h2>
    <input type="text" id="emailInput" placeholder="Enter your temp email"
           class="w-full px-3 py-2 rounded-lg text-black mb-3">
    <button onclick="getInbox()" class="bg-yellow-500 hover:bg-yellow-600 px-4 py-2 rounded-lg text-white font-semibold">
      Get Inbox
    </button>
    <pre id="inbox" class="bg-black text-green-300 p-3 mt-4 rounded-lg overflow-x-auto text-sm"></pre>
  </div>

  <div class="bg-gray-800 p-6 rounded-2xl shadow-lg w-full max-w-lg">
    <h2 class="text-xl font-semibold text-pink-400 mb-2">Read Message</h2>
    <input type="text" id="messageIdInput" placeholder="Enter Message ID"
           class="w-full px-3 py-2 rounded-lg text-black mb-3">
    <button onclick="getMessage()" class="bg-pink-500 hover:bg-pink-600 px-4 py-2 rounded-lg text-white font-semibold">
      Get Message
    </button>
    <pre id="message" class="bg-black text-blue-300 p-3 mt-4 rounded-lg overflow-x-auto text-sm"></pre>
  </div>
</body>
</html>
