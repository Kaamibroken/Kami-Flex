<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Temp Mail â€” Kami Flex</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
body { background: linear-gradient(to bottom right,#0f172a,#1e293b,#0f172a); font-family:'Roboto',sans-serif; color:white; margin:0; }
.glass { background: rgba(15,23,42,0.85); backdrop-filter: blur(12px); border-radius:16px; padding:16px; margin-bottom:16px; }
.center-loader { position:fixed; inset:0; display:grid; place-items:center; background:rgba(2,6,23,0.55); z-index:50; }
@keyframes spin { 0% { transform: rotate(0deg) } 100% { transform: rotate(360deg) } }
.loader { border:4px solid rgba(255,255,255,0.12); border-top:4px solid #a855f7; border-radius:9999px; width:48px; height:48px; animation:spin 1s linear infinite; }
.toast { position:fixed; right:1rem; bottom:1rem; background:rgba(0,0,0,0.85); color:white; padding:0.5rem 1rem; border-radius:8px; display:none; z-index:60; font-weight:500; }
.view { display:none; }
.active { display:block; }
.email-item { cursor:pointer; padding:12px; border-bottom:1px solid rgba(255,255,255,0.1); border-radius:8px; margin:4px 0; transition:background 0.2s; }
.email-item:hover { background: rgba(255,255,255,0.05); }
.button { padding:8px 12px; border-radius:8px; cursor:pointer; transition:scale 0.2s; font-weight:600; }
.button:hover { transform:scale(1.05); }
</style>
</head>
<body class="min-h-screen p-6">

<!-- Loader -->
<div id="fullLoader" class="center-loader hidden">
  <div class="loader"></div>
  <div class="mt-2 text-white">Loadingâ€¦</div>
</div>

<!-- Toast -->
<div id="toast" class="toast"></div>

<!-- Home View -->
<div id="homeView" class="view active">
  <div class="glass">
    <h1 class="text-3xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500">Temp Mail â€” Kami Flex</h1>
    <div class="flex gap-2 mb-2">
      <input id="generatedEmail" readonly class="flex-1 px-3 py-2 rounded-lg bg-slate-900/60 border border-white/5" value="â€”" />
      <button id="generateBtn" class="px-4 py-2 bg-purple-600 rounded-lg button">ðŸŽ² Generate</button>
      <button id="copyBtn" class="px-4 py-2 bg-green-500 rounded-lg button hidden">ðŸ“‹ Copy</button>
    </div>
    <div class="flex gap-2">
      <button id="refreshInboxBtn" class="px-4 py-2 bg-yellow-500 rounded-lg flex-1 button">ðŸ“¥ Refresh Inbox</button>
      <button id="clearBtn" class="px-4 py-2 bg-gray-700 rounded-lg flex-1 button">ðŸ§¹ Clear</button>
    </div>
    <p class="mt-2 text-white/60">Status: <span id="statusText">Idle</span></p>
  </div>
</div>

<!-- Inbox View -->
<div id="inboxView" class="view">
  <div class="glass">
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-2xl font-semibold">Inbox (<span id="inboxCount">0</span>)</h2>
      <button id="backToHomeBtn" class="px-3 py-1 bg-gray-700 button">â¬… Back</button>
    </div>
    <div id="inboxList" class="text-white/70 max-h-[70vh] overflow-auto">
      No messages yet.
    </div>
  </div>
</div>

<!-- Message View -->
<div id="messageView" class="view">
  <div class="glass">
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500" id="msgSubject">Subject</h2>
      <button id="backToInboxBtn" class="px-3 py-1 bg-gray-700 button">â¬… Back</button>
    </div>
    <p class="text-sm text-white/50 mb-2" id="msgFrom">From</p>
    <p class="text-sm text-white/50 mb-4" id="msgTime">Date</p>
    <div class="bg-slate-900/60 p-4 rounded-lg min-h-[300px] whitespace-pre-wrap" id="msgBody">
      Message body
    </div>
    <button id="copyMessageBtn" class="mt-4 px-4 py-2 bg-green-500 button">ðŸ“‹ Copy Message</button>
  </div>
</div>

<script>
// Elements
const homeView = document.getElementById('homeView');
const inboxView = document.getElementById('inboxView');
const messageView = document.getElementById('messageView');

const generateBtn = document.getElementById('generateBtn');
const copyBtn = document.getElementById('copyBtn');
const refreshInboxBtn = document.getElementById('refreshInboxBtn');
const clearBtn = document.getElementById('clearBtn');
const generatedEmail = document.getElementById('generatedEmail');
const statusText = document.getElementById('statusText');
const inboxList = document.getElementById('inboxList');
const inboxCount = document.getElementById('inboxCount');
const fullLoader = document.getElementById('fullLoader');
const toast = document.getElementById('toast');

const backToHomeBtn = document.getElementById('backToHomeBtn');
const backToInboxBtn = document.getElementById('backToInboxBtn');
const msgSubject = document.getElementById('msgSubject');
const msgFrom = document.getElementById('msgFrom');
const msgTime = document.getElementById('msgTime');
const msgBody = document.getElementById('msgBody');
const copyMessageBtn = document.getElementById('copyMessageBtn');

let currentEmail='';
let currentInbox=[];
let currentMessage=null;

// Utility
function showToast(msg,time=2000){ toast.innerText=msg; toast.style.display='block'; setTimeout(()=>toast.style.display='none',time); }
function showLoader(show=true){ fullLoader.classList.toggle('hidden',!show); }
function showView(view){ homeView.classList.remove('active'); inboxView.classList.remove('active'); messageView.classList.remove('active'); view.classList.add('active'); }

// Generate Email
generateBtn.addEventListener('click',()=>{
  showLoader(true);
  setTimeout(()=>{
    currentEmail = `user${Math.floor(Math.random()*1000)}@tempmail.com`;
    generatedEmail.value=currentEmail;
    copyBtn.classList.remove('hidden');
    showToast('Email generated: '+currentEmail);
    statusText.innerText='Email generated';
    currentInbox=[]; inboxList.innerHTML='No messages yet.'; inboxCount.innerText=0;
    showLoader(false);
    showToast('Waiting for emails...');
  },800);
});

// Copy Email
copyBtn.addEventListener('click',()=> navigator.clipboard.writeText(currentEmail).then(()=>showToast('Copied')) );

// Clear
clearBtn.addEventListener('click',()=>{
  currentEmail=''; currentInbox=[]; currentMessage=null;
  generatedEmail.value='â€”';
  inboxList.innerHTML='No messages yet.';
  inboxCount.innerText=0;
  copyBtn.classList.add('hidden');
  statusText.innerText='Cleared';
  showView(homeView);
});

// Simulate new emails arrival
function simulateEmails(){
  if(!currentEmail) return;
  setTimeout(()=>{
    currentInbox=[
      {id:1,from:'alice@example.com',subject:'Welcome',time:'2025-09-29 12:45',body:'Hello, welcome to Kami Flex TempMail!'},
      {id:2,from:'bob@example.com',subject:'Your OTP',time:'2025-09-29 12:50',body:'Your OTP code is 123456'},
      {id:3,from:'newsletter@site.com',subject:'Weekly Update',time:'2025-09-29 13:00',body:'This is your weekly newsletter.'}
    ];
    inboxList.innerHTML='';
    inboxCount.innerText=currentInbox.length;
    currentInbox.forEach(m=>{
      const div=document.createElement('div');
      div.className='email-item';
      div.innerHTML=`<div class="font-semibold">${m.subject}</div><div class="text-sm text-white/50">${m.from} - ${m.time}</div>`;
      div.onclick=()=>openMessage(m);
      inboxList.appendChild(div);
    });
    statusText.innerText='Inbox loaded';
    showView(inboxView);
    showToast('New emails received!');
  },2000);
}

// Open Message
function openMessage(msg){
  currentMessage=msg;
  msgSubject.innerText=msg.subject;
  msgFrom.innerText='From: '+msg.from;
  msgTime.innerText='Date: '+msg.time;
  msgBody.innerText=msg.body;
  showView(messageView);
}

// Back buttons
backToHomeBtn.addEventListener('click',()=> showView(homeView));
backToInboxBtn.addEventListener('click',()=> showView(inboxView));
copyMessageBtn.addEventListener('click',()=> navigator.clipboard.writeText(currentMessage.body).then(()=>showToast('Copied')) );

// Auto simulate email arrival after generate
setInterval(simulateEmails , 10000); // har 10 sec check for new emails

// Refresh inbox manually
refreshInboxBtn.addEventListener('click',()=>{
  if(currentInbox.length===0){
    showToast('No new emails yet');
  } else {
    showToast('Inbox refreshed');
    showView(inboxView);
  }
});
</script>

<!-- Monetag -->
<meta name="monetag" content="b805f1bd7c6023d0341a4d15bd8fe547">
<script src="https://fpyf8.com/88/tag.min.js" data-zone="174168" async data-cfasync="false"></script>

</body>
</html>
